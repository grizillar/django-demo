{% extends 'layout/base.html' %} {% block title %} Dashboard {% endblock %} {% block stylesheets %}
<link rel="stylesheet" href="/static/dashboard/dashboard.css" />
{% endblock %} {% block javascript %}
<script>
	var campaignsJSON = "{{ campaigns }}";
	var summaryJSON = "{{ summaryJSON }}";
	var CPRJSON = "{{ CPRJSON }}";
	var summaryPMJSON = "{{ summaryPMJSON }}";
	var platformCountJSON = "{{ platformCountJSON }}";

	var possibleYearJSON = "{{ possibleYearJSON }}";
	var startdate = "{{ start_date }}";
	var enddate = "{{ end_date }}";
	var platform = "{{ platform }}";
	var multiple_selector = "{{ multiple_selector }}";
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
<script src="/static/dashboard/dashboard.js"></script>
<script src="/static/dashboard/chart.js"></script>
{% endblock %} {% block content %}
<div class="container">
	<div>
		<div class="d-flex justify-content-end">
			<button id="filter-button" class="btn override" type="button" data-bs-toggle="collapse" data-bs-target="#queryEditor" aria-expanded="false" aria-controls="queryEditor"><i class="bi bi-funnel-fill"></i> ตัวกรอง</button>
		</div>
		<div class="collapse" id="queryEditor">
			<div class="card card-body">
				<form id="query-form" onsubmit="querySubmit()">
					<div class="row">
						<div class="col">
							<ul class="nav nav-tabs" id="time-interval" role="tablist">
								<li class="nav-item" role="presentation">
									<button class="nav-link active" id="date-tab" data-bs-toggle="tab" data-bs-target="#date" type="button" role="tab" aria-controls="date" aria-selected="true">ตามวันที่</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="period-tab" data-bs-toggle="tab" data-bs-target="#period" type="button" role="tab" aria-controls="period" aria-selected="false">ตามพีเรียด</button>
								</li>
							</ul>
							<div class="tab-content" id="time-interval-contents">
								<div class="tab-pane fade show active" id="date" role="tabpanel" aria-labelledby="date-tab">
									<p style="font-size: large"><strong>ช่วงเวลา</strong></p>
									<label for="startdate">วันที่ต้น</label>
									<input id="startdate" name="startdate" class="form-control query-date-input" type="date" />
									<label for="enddate">วันที่ปลาย</label>
									<input id="enddate" name="enddate" class="form-control query-date-input" type="date" />
								</div>
								<div class="tab-pane fade" id="period" role="tabpanel" aria-labelledby="period-tab">
									<p style="font-size: large"><strong>ช่วงพีเรียด</strong></p>
									<div id="period-array">
										<!-- Period Element Fill up here -->
									</div>
									<div id="count-control" class="d-inline-flex justify-content-end align-items-center w-100">
										<button type="button" class="count-btn btn btn-primary btn-circle rounded-circle" onclick="periodDec()">-</button>
										<p class="counter" id="period-counter">1</p>
										<button type="button" class="count-btn btn btn-primary btn-circle rounded-circle" onclick="periodInc()">+</button>
									</div>
								</div>
							</div>
						</div>
						<div class="col">
							<p style="font-size: large"><strong>แพลตฟอร์ม</strong></p>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="1" name="platform-query" checked />
								<label class="form-check-label">Facebook</label>
							</div>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="2" name="platform-query" checked />
								<label class="form-check-label">Instagram</label>
							</div>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="3" name="platform-query" checked />
								<label class="form-check-label">Line</label>
							</div>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="4" name="platform-query" checked />
								<label class="form-check-label">Google Ads</label>
							</div>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="5" name="platform-query" checked />
								<label class="form-check-label">Google Organic</label>
							</div>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="6" name="platform-query" checked />
								<label class="form-check-label">Website</label>
							</div>
							<div class="form-check form-switch">
								<input class="form-check-input" type="checkbox" id="7" name="platform-query" checked />
								<label class="form-check-label">Other</label>
							</div>
						</div>

						<div class="col">
							<p style="font-size: large"><strong>ตัวเลือกข้อมูล</strong></p>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="spending" />
								<label class="form-check-label"> Spending </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="reach" />
								<label class="form-check-label"> Reach </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="impression" />
								<label class="form-check-label"> Impression </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="engagement" />
								<label class="form-check-label"> Engagement </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="user" />
								<label class="form-check-label"> User </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="new_user" />
								<label class="form-check-label"> New User </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="order" />
								<label class="form-check-label"> Order </label>
							</div>
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="multiple-selector" id="revenue" />
								<label class="form-check-label"> Revenue </label>
							</div>
						</div>
					</div>
					<div class="row">
						<div id="E6" class="alert alert-danger sign hidden" role="alert"><i class="bi bi-exclamation-triangle-fill"></i> <b>เกิดข้อผิดพลาด (E6):</b> ไม่พบข้อมูลปีในช่วงพีเรียด</div>
						<div class="d-flex justify-content-end query-submit-buttons">
							<!-- <button type="button" onclick="testbutton()" class="btn override">ทดสอบ</button> -->
							<button type="button" onclick="queryClear()" class="btn btn-danger override">ล้าง</button>
							<button type="button" onclick="querySubmit()" class="btn btn-success override">ยืนยัน</button>
							<!-- <button type="submit" class="btn btn-success override">ยืนยัน</button> -->
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	<div class="shadow section">
		<div class="row gx-3">
			<div class="col-9">
				<div class="card">
					<div class="card-body">
						<p class="graph-title">ตาราง Summary {% if start_date %} ตั้งแต่วันที่ {{ start_date }} {% endif %} {% if end_date %} ถึงวันที่ {{ end_date }} {% endif %}</p>
						<table class="table cell">
							<thead class="table-dark">
								<tr>
									<th rowspan="2" scope="col">#</th>
									<th rowspan="2" scope="col">Platform</th>
									<th rowspan="2" scope="col">Spending</th>
									<th colspan="2" scope="col">Awareness</th>
									<th colspan="1" scope="col">Interest</th>
									<th colspan="2" scope="col">Desire</th>
									<th colspan="2" scope="col">Action</th>
								</tr>
								<tr>
									<th scope="col">Reach</th>
									<th scope="col">Impression</th>
									<th scope="col">Engagement</th>
									<th scope="col">User</th>
									<th scope="col">New User</th>
									<th scope="col">Order</th>
									<th scope="col">Revenue</th>
								</tr>
							</thead>
							<tbody id="db1"></tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="col-3 d-flex">
				<div class="container">
					<div class="row d-flex">
						<div class="card facebook_color">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div><i class="icon bi bi-facebook"></i> Facebook</div>
									<div><b id="fb_count"></b></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row d-flex">
						<div class="card instagram_color">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div><i class="icon bi bi-instagram"></i> Instagram</div>
									<div><b id="ig_count"></b></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row d-flex">
						<div class="card line_color">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div><i class="icon bi bi-line"></i> Line</div>
									<div><b id="ln_count"></b></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row d-flex">
						<div class="card google_color">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div><i class="icon bi bi-google"></i> Google Ads</div>
									<div><b id="gg_count"></b></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row d-flex">
						<div class="card">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div>Total Campaign</div>
									<div><b id="campaign_count">{{ campaign_count }}</b></div>
								</div>
							</div>
						</div>
					</div>
					<div class="row d-flex">
						<div class="card">
							<div class="card-body">
								<div class="d-flex justify-content-between">
									<div>Total Site Traffic</div>
									<div><b id="sitetraffic_count">{{ sitetraffic_count }}</b></div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row" id="chart-test-1"></div>
		<div class="row">
			<div class="col-12">
				<div class="card">
					<div class="card-body">
						<p class="graph-title" id="summary-per-month-title">กราฟผลรวม Reach, Impression, Engagementแต่ละเดือน</p>
						<div id="g-l1">
							<canvas id="line-1"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="shadow section">
		<div class="row">
			<!-- <div class="col-2 d-flex">
			<div class="card w-100">
				<div class="card-body">
					<p>Empty card</p>
				</div>
			</div>
		</div> -->
			<div class="col-12">
				<div class="card">
					<div class="card-body">
						<p class="graph-title">ตารางค่าเฉลี่ย Cost per Result</p>
						<table class="table cell">
							<thead class="table-dark">
								<tr>
									<th rowspan="2" scope="col">Objective</th>
									<th rowspan="2" scope="col">Spending</th>
									<th colspan="2" scope="col">Awareness</th>
									<th colspan="2" scope="col">Interest</th>
									<th colspan="3" scope="col">Desire</th>
									<th colspan="1" scope="col">Action</th>
								</tr>
								<tr>
									<th scope="col">Cost/<br />Reach</th>
									<th scope="col">Cost/<br />Impression</th>
									<th scope="col">Cost/<br />Engagement</th>
									<th scope="col">Cost/<br />VideoView</th>
									<th scope="col">Cost/<br />LandingPage</th>
									<th scope="col">Cost/<br />ProductView</th>
									<th scope="col">Cost/<br />AddtoCartw</th>
									<th scope="col">Cost/<br />Purchase</th>
								</tr>
							</thead>
							<tbody id="db2"></tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
